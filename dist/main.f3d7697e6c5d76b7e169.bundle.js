/*! For license information please see main.f3d7697e6c5d76b7e169.bundle.js.LICENSE.txt */
(()=>{var t,e={67:(t,e,i)=>{"use strict";var s;i(260),function(t){class e{constructor(){this.min={width:0,height:0},this.max={width:0,height:0},this.orientation={on:(t,i,s)=>{if(null!==typeof screen.orientation&&void 0!==screen.orientation&&e.mobileAndTabletCheck())return screen.orientation.addEventListener(t,i,s)},off:(t,i,s)=>{if(screen.orientation&&e.mobileAndTabletCheck())return screen.orientation.removeEventListener(t,i,s)},lock:t=>{if(null!==typeof screen.orientation.lock&&void 0!==screen.orientation&&e.mobileAndTabletCheck())return screen.orientation.lock(t)},unlock:()=>{if(null!==typeof screen.orientation.unlock&&void 0!==screen.orientation&&e.mobileAndTabletCheck())return screen.orientation.unlock()}},this.app=null,this.parent="game",this.key="",this.utils=null,this.mode=null,this.setup={key:"",physics:{arcade:{gravity:{y:0},useTicker:!0,debug:!1}}},e.mobileAndTabletCheck()?(this.inputType="touch",this.mode=Phaser.Scale.RESIZE,this.position=Phaser.Scale.NO_CENTER,this.width=innerWidth,this.height=innerHeight,this.min.width=240,this.min.height=480,this.max.width=3e3,this.max.height=1400):(this.inputType="generic",this.mode=Phaser.Scale.RESIZE,this.position=Phaser.Scale.CENTER_HORIZONTALLY,this.width=1150,this.height=2e3)}static mobileAndTabletCheck(){let t=!1;var e;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}static isDesktop(i){return!!(!e.mobileAndTabletCheck()&&t.Config.isLandscape(i)||t.Process.width>540)}static isLandscape(t){return"landscape-primary"===t.scale.orientation.toString()||"landscape-secondary"===t.scale.orientation.toString()||"landscape"===t.scale.orientation.toString()}static isPortrait(t){return"portrait-primary"===t.scale.orientation.toString()||"portrait-primary"===t.scale.orientation.toString()||"portrait"===t.scale.orientation.toString()}static vibrate(t){navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate,navigator.vibrate(t)}static makeTransparantBackground(t){t.scene.stop("Background");let e=document.getElementById("game");null!==e&&(e.getElementsByTagName("canvas")[0].style.backgroundColor="transparent")}}t.Config=e,t.Process=new e}(s||(s={}));class n{}n.ukeSpeed=5,n.currentLevel=1,n.score=0;var a=function(t,e,i,s){return new(i||(i=Promise))((function(n,a){function r(t){try{h(s.next(t))}catch(t){a(t)}}function o(t){try{h(s.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}h((s=s.apply(t,e||[])).next())}))};class r extends Phaser.Physics.Arcade.Sprite{constructor(t,e,i,n,a){super(t,e,i,n),this.facing="side",this._scene=t,this.key=n,this.isPlayer=a,this.worldBounds=this._scene.background,t.add.existing(this),t.physics.add.existing(this),this.isPlayer?(t.scene.run("Controller",this),this.controls=t.scene.get("Controller"),this.setSize(30,20).setFrame("fr05")):(t.entities.push(this),this.hitbox=t.add.rectangle(0,0,5,20),t.physics.world.enable(this.hitbox),s.Process.app.data.ukeSpeed=5*s.Process.app.data.currentLevel,this.setUkeState=t=>this.applyState(t)),t.events.on("update",(()=>this.update()))}applyState(t){return a(this,void 0,void 0,(function*(){switch(t){case"idle":const t=yield this.getFrame();t&&this.setFrame(t).stop();break;case"kokyu":this.setState("kokyu");const e=yield this.getDir();this.anims.play(`${this.key} kokyu ${e}`,!0),s.Process.app.audio.play(this._scene,"hiyah1",.5);break;case"roll":this.setState("roll"),this.hitbox.active=!1,this._scene.physics.world.disable(this.hitbox),this._scene.time.delayedCall(700,(()=>{this.setState(""),this.hitbox.active=!0,this._scene.physics.world.enable(this.hitbox)})),this.anims.play(`${this.key} roll`,!0),this.isPlayer?this.flipX?this.x-=6:this.x+=6:this._scene.physics.moveToObject(this,this._scene.player,125)}}))}update(){return a(this,void 0,void 0,(function*(){this.active&&(this.isPlayer?(this.on(Phaser.Animations.Events.ANIMATION_COMPLETE,(()=>{"kokyu"===this.state&&this.setState("")}),this._scene),this.controls.inputs.states.left&&this.x>this._scene.cameras.main.worldView.left+10&&(this.x-=3,this.facing="side",this.setState("moving").setFlipX(!0).play(this.controls.inputs.states.down?`${this.key} walk front`:this.controls.inputs.states.up?`${this.key} walk back`:`${this.key} walk side`,!0)),this.controls.inputs.states.right&&this.x<this._scene.cameras.main.worldView.right-20&&(this.x+=3,this.facing="side",this.setState("moving").setFlipX(!1).play(this.controls.inputs.states.down?`${this.key} walk front`:this.controls.inputs.states.up?`${this.key} walk back`:`${this.key} walk side`,!0)),this.controls.inputs.states.up&&this.y>this._scene.scale.height/2-30&&(this.y-=4,this.facing="back",this.setState("moving").play(`${this.key} walk back`,!0)),this.controls.inputs.states.down&&this.y<this.worldBounds.y+this.worldBounds.height-(this.worldBounds.height/2+40)&&(this.y+=4,this.facing="front",this.setState("moving").play(`${this.key} walk front`,!0)),this.controls.inputs.states.left||this.controls.inputs.states.right||this.controls.inputs.states.up||this.controls.inputs.states.down||"kokyu"===this.state||this.setState("").applyState("idle")):function(t,e){if("kokyu"===e.state||"roll"===e.state)return;let i=s.Process.app.data.ukeSpeed+5*Math.random()+1;switch(t.physics.moveToObject(e,t.player,i),e.hitbox.setPosition(e.x,e.y),t.player.facing){case"side":e.setFlipX(!(t.player.x>e.x)).play(t.player.controls.inputs.states.down?`${e.key} walk front`:t.player.controls.inputs.states.up?`${e.key} walk back`:`${e.key} walk side`,!0);break;case"back":e.y>t.scale.height/2-30&&(e.y-=2,e.play("moving"!==t.player.state?`${e.key} walk side`:`${e.key} walk back`,!0));break;case"front":e.y<e.worldBounds.y+e.worldBounds.height-(e.worldBounds.height/2+40)&&(e.y+=2,e.play("moving"!==t.player.state?`${e.key} walk side`:`${e.key} walk front`,!0))}}(this._scene,this),this.setDepth(this.y),this.y<this._scene.scale.height/2-20?this.setScale(.6):this.y<this._scene.scale.height/2-10?this.setScale(.8):this.y>this._scene.cameras.main.worldView.bottom-58?this.setScale(1.3):this.setScale(1))}))}getFrame(){return a(this,void 0,void 0,(function*(){if(this.anims.currentAnim)switch(this.anims.currentAnim.key){case`${this.key} walk front`:return"fr15";case`${this.key} walk back`:return"fr23";case`${this.key} walk side`:case`${this.key} roll`:default:return"fr05"}}))}getDir(){return a(this,void 0,void 0,(function*(){switch(this.facing){case"front":return"front";case"back":return"back";default:return"side"}}))}}const o=JSON.parse('{"image":[{"dojo":"assets/dojo.png"},{"logo":"assets/logo.png"}],"audio":[{"huh":"assets/huh.ogg"},{"ring":"assets/ring.ogg"},{"error":"assets/error.ogg"},{"hiyah1":"assets/hiyah1.ogg"},{"shakuhachi1":"assets/shakuhachi1.ogg"},{"shakuhachi2":"assets/shakuhachi2.ogg"}],"atlas":[{"nage":["assets/nage.png","assets/json/aikidoka.json"]},{"uke":["assets/uke.png","assets/json/aikidoka.json"]}]}');var h=i(555),c=i.n(h),u=function(t,e,i,s){return new(i||(i=Promise))((function(n,a){function r(t){try{h(s.next(t))}catch(t){a(t)}}function o(t){try{h(s.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}h((s=s.apply(t,e||[])).next())}))};class l extends Phaser.Scene{constructor(){super("Boot")}init(){return u(this,void 0,void 0,(function*(){this.data=yield s.Process.app.refreshApp(),this.input.keyboard.on("keyup",(()=>this.initFullscreen())),this.input.on("pointerup",(()=>this.initFullscreen()))}))}preload(){return u(this,void 0,void 0,(function*(){this.load.json("resources_main",o),this.load.plugin("rexvirtualjoystickplugin",c(),!0)}))}create(){return u(this,void 0,void 0,(function*(){this.add.text(0,0,"",{fontSize:"1px",fontFamily:"Digitizer"}).setAlpha(0),this.time.delayedCall(500,(()=>{this.scene.run("Preload",this.data)}))}))}initFullscreen(){!this.scale.isFullscreen&&this.scale.fullscreen.available&&(this.scale.fullscreenTarget=document.getElementById(s.Process.app.parent),this.scale.startFullscreen())}}class d{constructor(t){this.target=t,this.buttonDown=!1,this.joystick={A:{self:null}},this.pauseMenu={isPaused:!1,cursorPos:0},this.currentInput={type:null},this.states={left:!1,right:!1,up:!1,down:!1,A:!1,B:!1,C:!1,D:!1,enter:!1,start:!1,select:!1},this.buttons={A:null,B:null,C:null,D:null,left:null,up:null,right:null,down:null,select:null,start:null,arrows:{up:null,down:null,left:null,right:null}},this.actionInputs=["A","B","C","D"],this.directionalInputs=["left","right","up","down"],this.optionInputs=["start","select"],this.refresh={default:()=>{for(let[t,e]of Object.entries(this.currentInput))e=!1}}}get state(){for(let[t,e]of Object.entries(this.states))if(!0===e)return t}_applyButton(t,e,i){if(!this.buttonDown){if(this.buttonDown=!0,this.actionInputs.includes(e))for(let t in this.directionalInputs)this.states[this.directionalInputs[t]]=!1;switch(e){case"start":this.target.applyState("kokyu");break;case"select":this.states.select=!0;break;case"enter":this.states.enter=!0;break;case"left":this.states.left=!0;break;case"right":this.states.right=!0;break;case"up":this.states.up=!0;break;case"down":this.states.down=!0}(this.states.A||this.states.B||this.states.C||this.states.D)&&this.directionalInputs.includes(e)&&(this.states[e]=!1)}}_releaseButton(t){this.buttonDown=!1,(this.directionalInputs.includes(t)||this.actionInputs.includes(t)||this.optionInputs.includes(t))&&(this.states[t]=!1);for(let[t,e]of Object.entries(this.currentInput))e=!1}virtualControls(t){const e=t.plugins.get("rexvirtualjoystickplugin");t.input.addPointer(1),this.joystick.A.base=t.add.circle(100,450,50,0).setAlpha(.5),this.joystick.A.thumb=t.add.circle(100,450,30,13421772).setAlpha(.5),this.joystick.A.self=e.add(t,{forceX:0,forceY:0,x:100,y:450,radius:60,base:this.joystick.A.base,thumb:this.joystick.A.thumb}),this.buttons.A=t.add.circle(t.scale.width-80,500,20,0).setAlpha(.5).setInteractive().on("pointerdown",(()=>this.target.applyState("kokyu"))),this.buttons.B=t.add.circle(t.scale.width-100,550,20,0).setAlpha(.5).setInteractive().on("pointerdown",(()=>this.target.applyState("kokyu"))),t.events.on("update",(()=>{t.scene.settings.active&&null!==this.joystick.A.self&&(this.joystick.A.self.forceX<-40&&(this.states.left=!0),this.joystick.A.self.forceX>40&&(this.states.right=!0),this.joystick.A.self.forceY<-40&&(this.states.up=!0),this.joystick.A.self.forceY>40&&(this.states.down=!0),0===this.joystick.A.self.forceX&&0===this.joystick.A.self.forceY&&(this._releaseButton("left"),this._releaseButton("right"),this._releaseButton("up"),this._releaseButton("down")))}))}keyboardControls(t){t.input.keyboard.on("keydown-SPACE",(e=>this._applyButton(t,"start",0)),!1).on("keyup-SPACE",(()=>this._releaseButton("start")),!1),t.input.keyboard.on("keydown-SHIFT",(()=>this._applyButton(t,"select",0)),!1).on("keyup-SHIFT",(()=>this._releaseButton("select")),!1),t.input.keyboard.on("keydown-UP",(()=>this._applyButton(t,"up",0)),!1).on("keyup-UP",(()=>this._releaseButton("up")),!1),t.input.keyboard.on("keydown-DOWN",(()=>this._applyButton(t,"down",0)),!1).on("keyup-DOWN",(()=>this._releaseButton("down")),!1),t.input.keyboard.on("keydown-LEFT",(()=>this._applyButton(t,"left",0)),!1).on("keyup-LEFT",(()=>this._releaseButton("left")),!1),t.input.keyboard.on("keydown-RIGHT",(()=>this._applyButton(t,"right",0)),!1).on("keyup-RIGHT",(()=>this._releaseButton("right")),!1),t.input.keyboard.on("keydown-S",(()=>this._applyButton(t,"A",0)),!1).on("keyup-S",(()=>this._releaseButton("A")),!1),t.input.keyboard.on("keydown-D",(()=>this._applyButton(t,"B",0)),!1).on("keyup-D",(()=>this._releaseButton("B")),!1),t.input.keyboard.on("keydown-W",(()=>this._applyButton(t,"C",0)),!1).on("keyup-W",(()=>this._releaseButton("C")),!1),t.input.keyboard.on("keydown-A",(()=>this._applyButton(t,"D",0)),!1).on("keyup-A",(()=>this._releaseButton("D")),!1),t.input.keyboard.on("keydown-ENTER",(()=>this._applyButton(t,"enter",0)),!1)}gamepadControls(t){t.input.gamepad.on("down",((e,i,n)=>{!0===s.Process.app.game.gameState&&!1===s.Process.app.game.cutScene&&(9===i.index&&this._applyButton(t,"start",0),8===i.index&&this._applyButton(t,"select",0),e.left&&this._applyButton(t,"left",0),e.right&&this._applyButton(t,"right",0),(e.up||e.L2)&&this._applyButton(t,"up",0),(e.down||e.L1)&&this._applyButton(t,"down",0),"A"===s.Process.app.input.mode?((e.A||e.R1)&&this._applyButton(t,"A",0),(e.B||e.R2)&&this._applyButton(t,"B",0),e.Y&&this._applyButton(t,"C",0),e.X&&this._applyButton(t,"D",0)):((e.B||e.R1)&&this._applyButton(t,"A",0),(e.A||e.R2)&&this._applyButton(t,"B",0),e.X&&this._applyButton(t,"C",0),e.Y&&this._applyButton(t,"D",0)))})).on("up",((t,e,i)=>{this._releaseButton("start"),this._releaseButton("select"),this._releaseButton("left"),this._releaseButton("right"),this._releaseButton("up"),this._releaseButton("down"),this._releaseButton("A"),this._releaseButton("B"),this._releaseButton("C"),this._releaseButton("D")}))}}class p extends Phaser.Scene{constructor(){super("Controller")}init(t){this.inputs=new d(t)}create(){s.Config.mobileAndTabletCheck()?this.inputs.virtualControls(this):this.inputs.keyboardControls(this),s.Process.app.ui.listen(this,"Controller",this.resizeWindow)}resizeWindow(t){t.scene.settings.active&&!1!==s.Process.app.input.virtual&&"touch"===s.Process.app.input.type&&setTimeout((()=>{"touch"===s.Process.app.input.type&&(null!==t.inputs.buttons.A&&t.inputs.buttons.A.setPosition(.76*t.cameras.main.width,t.cameras.main.height/2+20),null!==t.inputs.buttons.B&&t.inputs.buttons.B.setPosition(.9*t.cameras.main.width,t.cameras.main.height/2+80),null!==t.inputs.joystick.A&&t.inputs.joystick.A.self.setPosition(100,s.Config.isPortrait(t)?450:200))}),200)}}class f extends Phaser.Scene{constructor(){super("HUD")}create(){this.levelText1=this.add.text(10,10,"UKE: ",{fontSize:"3rem",fontFamily:"Digitizer"}).setStroke("#ff0000",4),this.levelText=this.add.text(220,10,"",{fontSize:"3rem",fontFamily:"Digitizer"}).setStroke("#ff0000",4),this.scoreText1=this.add.text(10,60,"SCORE: ",{fontSize:"3rem",fontFamily:"Digitizer"}).setStroke("#ff0000",4),this.scoreText=this.add.text(220,60,"",{fontSize:"3rem",fontFamily:"Digitizer"}).setStroke("#ff0000",4),this.timeText1=this.add.text(10,110,"TIME: ",{fontSize:"3rem",fontFamily:"Digitizer"}).setStroke("#ff0000",4),this.timeText=this.add.text(220,110,"",{fontSize:"3rem",fontFamily:"Digitizer"}).setStroke("#ff0000",4),s.Process.app.data.currentLevel>=10&&(this.highScore=this.add.text(10,160,"HIGH SCORE!",{fontSize:"3rem",fontFamily:"Digitizer"}).setStroke("#ffff00",4)),this.tweens.add({targets:this.highScore,alpha:.5,duration:500,ease:"Sine.easeOut",repeat:-1,yoyo:!0})}update(){this.scoreText.setText(s.Process.app.data.score.toString()),this.levelText.setText(s.Process.app.data.currentLevel.toString()),this.timeText.setText(this.scene.get("Game").timeLeft.toFixed(2).toString()),setTimeout((()=>{s.Config.mobileAndTabletCheck()?(this.levelText1.setScale(s.Config.isLandscape(this)?.6:.3),this.levelText.setScale(s.Config.isLandscape(this)?.6:.3).setX(this.levelText1.x+this.levelText1.width/2+10),this.scoreText1.setScale(s.Config.isLandscape(this)?.6:.3),this.scoreText.setScale(s.Config.isLandscape(this)?.6:.3).setX(this.scoreText1.x+this.scoreText1.width/2+10),this.timeText1.setScale(s.Config.isLandscape(this)?.6:.3),this.timeText.setScale(s.Config.isLandscape(this)?.6:.3).setX(this.timeText1.x+this.timeText1.width/2+10),this.highScore&&this.highScore.setScale(s.Config.isLandscape(this)?.6:.3)):(this.levelText1.setScale(s.Config.isLandscape(this)?1:.6),this.levelText.setScale(s.Config.isLandscape(this)?1:.6).setX(this.levelText1.x+this.levelText1.width),this.scoreText1.setScale(s.Config.isLandscape(this)?1:.6),this.scoreText.setScale(s.Config.isLandscape(this)?1:.6).setX(this.scoreText1.x+this.scoreText1.width),this.timeText1.setScale(s.Config.isLandscape(this)?1:.6),this.timeText.setScale(s.Config.isLandscape(this)?1:.6).setX(this.timeText1.x+this.timeText1.width),this.highScore&&this.highScore.setScale(s.Config.isLandscape(this)?1:.6))}),200)}}class y extends Phaser.Scene{constructor(){s.Process.setup.key="Game",super(s.Process.setup),this.entities=[]}create(){return t=this,e=void 0,n=function*(){let t=!1,e=1;this.timeLeft=20,s.Config.isLandscape(this)&&s.Config.mobileAndTabletCheck()?e=3:s.Config.isDesktop(this)&&(e=5),this.cameras.main.setZoom(e),s.Process.app.audio.play(this,"shakuhachi2"),this.background=this.add.sprite(this.cameras.main.width/2,this.cameras.main.height/2,"dojo"),s.Process.app.data.currentLevel>=10&&this.background.setTint(16711680*Math.random()),s.Process.app.hud=this.scene.run("HUD",this),this.player=new s.Process.app.player(this,this.scale.width/2-50,this.scale.height/2,"nage",!0),this.spawnUke(s.Process.app.data.currentLevel),this.physics.add.overlap(this.player,this.entities,((e,i)=>{if("kokyu"===this.player.state)this.entities.forEach((t=>{this.physics.world.overlap(e,t)&&t.hitbox.active&&(i.setUkeState("roll"),s.Process.app.audio.play(this,"huh",.5),s.Process.app.audio.play(this,"ring",.5),s.Process.app.data.score++)}));else if(this.physics.world.overlap(this.player,i.hitbox)){if(t)return;t=!0,i.setUkeState("kokyu"),this.time.delayedCall(500,(()=>this.endGame()))}})),document.addEventListener("fullscreenchange",(()=>{if(this.cameras.main.centerOn(this.cameras.main.width/2,this.cameras.main.height/2),this.background.setPosition(this.cameras.main.width/2,this.cameras.main.height/2),this.player.setScale(.6).setPosition(this.cameras.main.width/2-40,this.cameras.main.height/2),this.entities.forEach((t=>t.setScale(.6).setPosition(this.cameras.main.width/2+40,this.cameras.main.height/2))),!this.scale.isFullscreen){if(t)return;t=!0,this.time.delayedCall(500,(()=>this.scene.restart()))}}))},new((i=void 0)||(i=Promise))((function(s,a){function r(t){try{h(n.next(t))}catch(t){a(t)}}function o(t){try{h(n.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}h((n=n.apply(t,e||[])).next())}));var t,e,i,n}update(){this.timeLeft>.01?this.timeLeft-=.02:(s.Process.app.data.currentLevel++,this.scene.restart())}spawnUke(t){let e=1,i=1;for(let n=0;n<t;n++){1===n?(e=50*Math.random()+1,i=5*Math.random()+1):(e+=3*Math.random()+1,i+=2*Math.random()+1);let t=this.scale.width/2+e,a=this.scale.height/2+i;new s.Process.app.player(this,t,a,"uke",!1).setFlipX(!0)}}endGame(){s.Process.app.audio.play(this,"error"),this.scene.launch("GameOver"),this.scene.stop("Game")}}var m=function(t,e,i,s){return new(i||(i=Promise))((function(n,a){function r(t){try{h(s.next(t))}catch(t){a(t)}}function o(t){try{h(s.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}h((s=s.apply(t,e||[])).next())}))};class g{static play(t,e,i,s,n){let a=i||1,r=s||0,o=n||0;g.cached.push(e),g.cached.filter((i=>{g.sound=t.sound.add(e),g.sound.setLoop(r).setVolume(a).setDetune(o),i.toString()===e&&g.cached.splice(g.cached.indexOf(e),1),g.sound.play()}))}static stop(t,e){for(let i of e.sound.sounds)i.key==t&&i.stop()}static getStageTheme(t){return m(this,void 0,void 0,(function*(){return""}))}}g.noAudio=!1,g.default=!1,g.sound=null,g.cached=[],g.music={track:"",fadeIn:(t,e,i)=>{for(let t of i.sound.sounds)t.key===g.music.track&&i.tweens.add({targets:t,volume:{value:0,ease:"Power1",duration:500}});let s=i.sound.add(t).setLoop(!0).setVolume(0);i.tweens.add({targets:s,volume:{value:e,ease:"Power1",duration:3e3},onStart:()=>s.play()})},fadeOut:(t,e,i)=>{for(let s of i.sound.sounds)s.key===t&&i.tweens.add({targets:s,volume:{value:0,ease:"Power1",duration:3e3},onComplete:()=>{g.music.play(i),i.tweens.add({targets:s,volume:{value:e,ease:"Power1",duration:3e3}}),s.stop(),i.sound.removeByKey(s)}})},play:t=>m(void 0,void 0,void 0,(function*(){const e=yield g.getStageTheme(t.data.currentStage);g.music.track=e,t.sound.add(e).setLoop(!0).setVolume(.8).play()}))};class v extends Phaser.Scene{constructor(){super({key:"Preload"})}init(t){this.data=t}preload(){return t=this,e=void 0,s=function*(){yield function(t,e){return i=this,s=void 0,a=function*(){if(e.hasOwnProperty("image"))for(let i in e.image){let s=Object.keys(e.image[i]).find((t=>t));for(let n in e.image[i]){let a=e.image[i][n];t.load.image(s,a)}}if(e.hasOwnProperty("audio"))for(let i in e.audio){let s=Object.keys(e.audio[i]).find((t=>t));for(let n in e.audio[i]){let a=e.audio[i][n];t.load.audio(s,a)}}if(e.hasOwnProperty("atlas"))for(let i in e.atlas){let s=Object.keys(e.atlas[i]).find((t=>t));for(let n in e.atlas[i]){let a=e.atlas[i][n][0],r=e.atlas[i][n][1];t.load.atlas(s,a,r)}}if(e.hasOwnProperty("spritesheet"))for(let i in e.spritesheet){let s=Object.keys(e.spritesheet[i]).find((t=>t));for(let n in e.spritesheet[i]){let a=e.spritesheet[i][n][0],r=e.spritesheet[i][n][1];t.load.spritesheet(s,a,{frameWidth:r.frameWidth,frameHeight:r.frameHeight})}}},new((n=void 0)||(n=Promise))((function(t,e){function r(t){try{h(a.next(t))}catch(t){e(t)}}function o(t){try{h(a.throw(t))}catch(t){e(t)}}function h(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(r,o)}h((a=a.apply(i,s||[])).next())}));var i,s,n,a}(this,this.cache.json.get("resources_main"))},new((i=void 0)||(i=Promise))((function(n,a){function r(t){try{h(s.next(t))}catch(t){a(t)}}function o(t){try{h(s.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}h((s=s.apply(t,e||[])).next())}));var t,e,i,s}create(t){!function(t){["uke","nage"].forEach((e=>{t.anims.create({key:`${e} roll`,frames:t.anims.generateFrameNames(e,{prefix:"fr",start:0,end:4,zeroPad:2}),frameRate:8,repeat:0}),t.anims.create({key:`${e} walk side`,frames:t.anims.generateFrameNames(e,{prefix:"fr",start:5,end:14,zeroPad:2}),frameRate:8,repeat:-1}),t.anims.create({key:`${e} walk front`,frames:t.anims.generateFrameNames(e,{prefix:"fr",start:15,end:22,zeroPad:2}),frameRate:8,repeat:-1}),t.anims.create({key:`${e} walk back`,frames:t.anims.generateFrameNames(e,{prefix:"fr",start:23,end:30,zeroPad:2}),frameRate:8,repeat:-1}),t.anims.create({key:`${e} kokyu side`,frames:t.anims.generateFrameNames(e,{prefix:"fr",start:31,end:33,zeroPad:2}),frameRate:8,repeat:1,yoyo:!0}),t.anims.create({key:`${e} kokyu front`,frames:t.anims.generateFrameNames(e,{prefix:"fr",start:34,end:36,zeroPad:2}),frameRate:8,repeat:1,yoyo:!0}),t.anims.create({key:`${e} kokyu back`,frames:t.anims.generateFrameNames(e,{prefix:"fr",start:37,end:39,zeroPad:2}),frameRate:8,repeat:1,yoyo:!0})}))}(this),this.scene.run("Menu",t),this.scene.stop("Preload")}}class k extends Phaser.Scene{constructor(){s.Process.setup.key="Menu",super(s.Process.setup)}create(t){return e=this,i=void 0,a=function*(){this.data=t.data,this.cameras.main.fadeIn(3e3).setBackgroundColor(0).centerOn(this.scale.width/2,this.scale.height/2).setZoom(s.Config.mobileAndTabletCheck()?.5:1);const e=this.add.sprite(this.scale.width/2,this.scale.height/2-100,"logo").setScale(5);this.time.delayedCall(3e3,(()=>{const t=this.add.text(e.x-170,e.y+200,"START GAME",{fontSize:"3rem",fontFamily:"Arial"});this.time.delayedCall(500,(()=>{this.tweens.add({targets:t,alpha:0,duration:1500,ease:"Sine.easeOut",repeat:-1,yoyo:!0}),this.input.keyboard.once("keydown",(()=>this.startGame())),this.input.once("pointerdown",(()=>this.startGame()))}))})),document.addEventListener("fullscreenchange",(()=>this.cameras.main.centerOn(this.cameras.main.width/2,this.cameras.main.height/2)))},new((n=void 0)||(n=Promise))((function(t,s){function r(t){try{h(a.next(t))}catch(t){s(t)}}function o(t){try{h(a.throw(t))}catch(t){s(t)}}function h(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(r,o)}h((a=a.apply(e,i||[])).next())}));var e,i,n,a}startGame(){this.scene.run("Game",this),this.scene.stop("Menu")}}class w extends Phaser.Scene{constructor(){s.Process.setup.key="GameOver",super(s.Process.setup)}create(t){return e=this,i=void 0,a=function*(){this.data=t.data,this.cameras.main.fadeIn(3e3).setBackgroundColor(0).centerOn(this.scale.width/2,this.scale.height/2).setZoom(s.Config.mobileAndTabletCheck()?.5:1),s.Process.app.data.currentLevel=1,s.Process.app.data.score=0,s.Process.app.audio.play(this,"shakuhachi1"),this.add.text(this.scale.width/2-220,this.scale.height/2-100,"GAME OVER",{fontSize:"5rem",fontFamily:"Arial"});const e=this.add.text(this.scale.width/2-100,this.scale.height/2,"play again?",{fontSize:"2rem",fontFamily:"Courier"});this.time.delayedCall(500,(()=>{this.tweens.add({targets:e,alpha:0,duration:1500,ease:"Sine.easeOut",repeat:-1,yoyo:!0}),this.input.keyboard.once("keydown",(()=>this.startGame())),this.input.once("pointerdown",(()=>this.startGame()))})),document.addEventListener("fullscreenchange",(()=>this.cameras.main.centerOn(this.cameras.main.width/2,this.cameras.main.height/2)))},new((n=void 0)||(n=Promise))((function(t,s){function r(t){try{h(a.next(t))}catch(t){s(t)}}function o(t){try{h(a.throw(t))}catch(t){s(t)}}function h(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(r,o)}h((a=a.apply(e,i||[])).next())}));var e,i,n,a}startGame(){this.scene.run("Game",this),this.scene.stop("GameOver")}}var b=function(t,e,i,s){return new(i||(i=Promise))((function(n,a){function r(t){try{h(s.next(t))}catch(t){a(t)}}function o(t){try{h(s.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}h((s=s.apply(t,e||[])).next())}))};class x{constructor(){}listen(t,e,i){const n=(t,e)=>{t.scene.settings.visible=!1,s.Process.app.ui.resize(t,e),null!==i&&i(t)},a=(t,e)=>{t.scene.settings.active&&n(t,e)};n(t,e),t.scale.on("resize",(()=>a(t,e)),t),screen.orientation.addEventListener("change",(()=>a(t,e))),screen.orientation.addEventListener("webkitfullscreenchange",(()=>a(t,e)))}callSizer(t){return this.parent=new Phaser.Structs.Size(t.scale.gameSize.width,t.scale.gameSize.height).setSize(t.scale.gameSize.width,t.scale.gameSize.height),this.sizer=new Phaser.Structs.Size(t.cameras.main.width,t.cameras.main.height,Phaser.Structs.Size.FIT,this.parent).setSize(t.scale.gameSize.width,t.scale.gameSize.height)}checkOrientation(t,e){switch(e){case"Preload":return[!s.Config.isDesktop(t)&&s.Config.isLandscape(t)?1400:t.cameras.main.width,!s.Config.isDesktop(t)&&s.Config.isLandscape(t)?1800:t.cameras.main.height];case"Controller":return[t.cameras.main.width,t.cameras.main.height];case"Modal":return[450,800];case"HUD":return[!s.Config.isDesktop(t)&&s.Config.isLandscape(t)?1400:740,!s.Config.isDesktop(t)&&s.Config.isLandscape(t)?1800:960];case"PauseMenu":return s.Config.isDesktop(t)?[2200,980]:s.Config.isLandscape(t)?[1700,1200]:[800,1200]}}getPosition(t,e){return b(this,void 0,void 0,(function*(){switch(e){case"Controller":case"Mini":return[t.cameras.main.width/2,t.cameras.main.height/2,!1];case"Preload":return s.Config.isDesktop(t)?[t.cameras.main.width/2,t.cameras.main.height/3.5,!1]:[s.Config.isLandscape(t)?180:t.cameras.main.width/2,s.Config.isLandscape(t)?t.cameras.main.height/2:t.cameras.main.height/3.5,!1];case"Modal":return[s.Config.isDesktop(t)?200:t.cameras.main.width/2,s.Config.isDesktop(t)?t.cameras.main.height/2:t.cameras.main.height/2.5,!1];case"HUD":return[!s.Config.isDesktop(t)&&s.Config.isLandscape(t)?t.cameras.main.width/3.5:t.cameras.main.width/2,t.cameras.main.height/2,!1];case"PauseMenu":return s.Config.isLandscape(t)?[s.Config.isDesktop(t)?30:420,s.Config.isDesktop(t)?t.cameras.main.height/2.4:650,!!s.Config.isDesktop(t)]:[t.cameras.main.width/2,s.Config.isDesktop(t)?t.cameras.main.height/2:t.cameras.main.height/2.5,!1];default:return[0,0,!1]}}))}setCamera(t,e,i,n){if(!0===n){let e=s.Config.isDesktop(t)?40:t.cameras.main.height>400?140:t.cameras.main.width/2-150;t.cameras.main.setPosition(e,screenTop),s.Config.isDesktop(t)||t.cameras.main.setZoom(Math.min(this.sizer.width/t.cameras.main.width,this.sizer.height/t.cameras.main.height))}else t.cameras.main.setViewport(Math.ceil(.5*(this.parent.width-this.sizer.width)),screenTop,this.sizer.width,this.sizer.height).setZoom(Math.max(this.sizer.width/t.cameras.main.width,this.sizer.height/t.cameras.main.height)).centerOn(e,i);t.scene.settings.visible=!0}resize(t,e){const i=this.checkOrientation(t,e);i&&(t.cameras.main.width=i[0],t.cameras.main.height=i[1],this.callSizer(t),setTimeout((()=>b(this,void 0,void 0,(function*(){const i=yield this.getPosition(t,e);this.setCamera(t,i[0],i[1],i[2])}))),300))}}class S{constructor(t){this.audio=g,this.data=n,this.type=Phaser.AUTO,this.transparent=!0,this.parent="game",this.backgroundColor="#898989",this.pixelArt=!0,this.scale={mode:t.mode,autoCenter:t.position,width:t.width,height:t.height,min:{width:t.min.width,height:t.min.height},max:{width:t.max.width,height:t.max.height},scaleRatio:0,parentBottom:{},sizerBottom:{}},this.dom={createContainer:!0},this.input={virtual:!0,gamepad:!0,type:t.inputType,mode:"A"},this.scene=[new l,new v,new k,new y,new f,new p,new w],this.ui=new x,this.player=r}refreshApp(){return t=this,e=void 0,a=function*(){return s.Process.app.gameData=new n,s.Process.app.gameData},new((i=void 0)||(i=Promise))((function(s,n){function r(t){try{h(a.next(t))}catch(t){n(t)}}function o(t){try{h(a.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}h((a=a.apply(t,e||[])).next())}));var t,e,i,a}}window.addEventListener("load",(()=>{s.Process.app=new S(s.Process),s.Process.game=new Phaser.Game(s.Process.app)}))},555:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function i(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=n(t);if(e){var a=n(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return r(this,i)}}function h(t,e,i){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}(t,e);if(s){var a=Object.getOwnPropertyDescriptor(s,e);return a.get?a.get.call(i):a.value}})(t,e,i||t)}var c=Phaser.Input.Keyboard.Key,u=Phaser.Input.Keyboard.KeyCodes,l=function(){function e(i){t(this,e),this.cursorKeys={up:new c(i,u.UP),down:new c(i,u.DOWN),left:new c(i,u.LEFT),right:new c(i,u.RIGHT)},this.noKeyDown=!0}return i(e,[{key:"shutdown",value:function(){for(var t in this.cursorKeys)this.cursorKeys[t].destroy();this.cursorKeys=void 0}},{key:"destroy",value:function(t){shutdown(t)}},{key:"createCursorKeys",value:function(){return this.cursorKeys}},{key:"setKeyState",value:function(t,e){var i=this.cursorKeys[t];return i.enabled&&(e&&(this.noKeyDown=!1),i.isDown!==e&&(d.timeStamp=Date.now(),e?i.onDown(d):i.onUp(d))),this}},{key:"clearAllKeysState",value:function(){for(var t in this.noKeyDown=!0,this.cursorKeys)this.setKeyState(t,!1);return this}},{key:"getKeyState",value:function(t){return this.cursorKeys[t]}},{key:"upKeyDown",get:function(){return this.cursorKeys.up.isDown}},{key:"downKeyDown",get:function(){return this.cursorKeys.down.isDown}},{key:"leftKeyDown",get:function(){return this.cursorKeys.left.isDown}},{key:"rightKeyDown",get:function(){return this.cursorKeys.right.isDown}},{key:"anyKeyDown",get:function(){return!this.noKeyDown}}]),e}(),d={altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,location:0},p=180/Math.PI,f={"up&down":0,"left&right":1,"4dir":2,"8dir":3},y={},m=Phaser.Utils.Objects.GetValue,g=Phaser.Math.Distance.Between,v=Phaser.Math.Angle.Between,k=function(){s(n,l);var e=o(n);function n(i,s){var a;return t(this,n),(a=e.call(this,i)).resetFromJSON(s),a}return i(n,[{key:"resetFromJSON",value:function(t){null==this.start&&(this.start={}),null==this.end&&(this.end={}),this._enable=void 0,this.setEnable(m(t,"enable",!0)),this.setMode(m(t,"dir","8dir")),this.setDistanceThreshold(m(t,"forceMin",16));var e=m(t,"start.x",null),i=m(t,"start.y",null),s=m(t,"end.x",null),n=m(t,"end.y",null);return this.setVector(e,i,s,n),this}},{key:"toJSON",value:function(){return{enable:this.enable,dir:this.dirMode,forceMin:this.forceMin,start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}}}},{key:"setMode",value:function(t){return"string"==typeof t&&(t=f[t]),this.dirMode=t,this}},{key:"enable",get:function(){return this._enable},set:function(t){if(this._enable!==t)return t||this.clearVector(),this._enable=t,this}},{key:"setEnable",value:function(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"toggleEnable",value:function(){return this.setEnable(!this.enable),this}},{key:"setDistanceThreshold",value:function(t){return t<0&&(t=0),this.forceMin=t,this}},{key:"clearVector",value:function(){return this.start.x=0,this.start.y=0,this.end.x=0,this.end.y=0,this.clearAllKeysState(),this}},{key:"setVector",value:function(t,e,i,s){if(this.clearVector(),!this.enable)return this;if(null===t)return this;if(void 0===i&&(i=t,s=e,e=t=0),this.start.x=t,this.start.y=e,this.end.x=i,this.end.y=s,0<this.forceMin&&this.force<this.forceMin)return this;var n=function(t,e,i){switch(void 0===i?i={}:!0===i&&(i=y),i.left=!1,i.right=!1,i.up=!1,i.down=!1,t=(t+360)%360,e){case 0:t<180?i.down=!0:i.up=!0;break;case 1:90<t&&t<=270?i.left=!0:i.right=!0;break;case 2:45<t&&t<=135?i.down=!0:135<t&&t<=225?i.left=!0:225<t&&t<=315?i.up=!0:i.right=!0;break;case 3:22.5<t&&t<=67.5?(i.down=!0,i.right=!0):67.5<t&&t<=112.5?i.down=!0:112.5<t&&t<=157.5?(i.down=!0,i.left=!0):157.5<t&&t<=202.5?i.left=!0:202.5<t&&t<=247.5?(i.left=!0,i.up=!0):247.5<t&&t<=292.5?i.up=!0:(292.5<t&&t<=337.5&&(i.up=!0),i.right=!0)}return i}(this.angle,this.dirMode,!0);for(var a in n)n[a]&&this.setKeyState(a,!0);return this}},{key:"forceX",get:function(){return this.end.x-this.start.x}},{key:"forceY",get:function(){return this.end.y-this.start.y}},{key:"force",get:function(){return g(this.start.x,this.start.y,this.end.x,this.end.y)}},{key:"rotation",get:function(){return v(this.start.x,this.start.y,this.end.x,this.end.y)}},{key:"angle",get:function(){return this.rotation*p}},{key:"octant",get:function(){var t=0;return this.rightKeyDown?t=this.downKeyDown?45:0:this.downKeyDown?t=this.leftKeyDown?135:90:this.leftKeyDown?t=this.upKeyDown?225:180:this.upKeyDown&&(t=this.rightKeyDown?315:270),t}}]),n}(),w={setEventEmitter:function(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter:function(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter:function(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},b=Phaser.Utils.Objects.GetValue,x=Phaser.Geom.Circle,S=Phaser.Geom.Circle.Contains,P=function(){s(a,k);var e=o(a);function a(i,s){var n;t(this,a);var r=i.scene;n=e.call(this,r,s);var o=b(s,"eventEmitter",void 0),h=b(s,"EventEmitterClass",void 0);return n.setEventEmitter(o,h),n.scene=r,n.gameObject=i,n.radius=b(s,"radius",100),i.setInteractive(new x(i.displayOriginX,i.displayOriginY,n.radius),S),n.boot(),n}return i(a,[{key:"resetFromJSON",value:function(t){return h(n(a.prototype),"resetFromJSON",this).call(this,t),this.pointer=void 0,this}},{key:"toJSON",value:function(){var t=h(n(a.prototype),"toJSON",this).call(this);return t.radius=this.radius,t}},{key:"boot",value:function(){this.gameObject.on("pointerdown",this.onKeyDownStart,this),this.gameObject.on("pointerover",this.onKeyDownStart,this),this.scene.input.on("pointermove",this.onKeyDown,this),this.scene.input.on("pointerup",this.onKeyUp,this),this.gameObject.once("destroy",this.onParentDestroy,this)}},{key:"shutdown",value:function(){this.scene&&(this.scene.input.off("pointermove",this.onKeyDown,this),this.scene.input.off("pointerup",this.onKeyUp,this),this.destroyEventEmitter(),this.pointer=void 0,this.scene=void 0,this.gameObject=void 0,h(n(a.prototype),"shutdown",this).call(this))}},{key:"destroy",value:function(t){this.shutdown(t)}},{key:"onParentDestroy",value:function(t,e){this.destroy(e)}},{key:"onKeyDownStart",value:function(t){t.isDown&&void 0===this.pointer&&(this.pointer=t,this.onKeyDown(t))}},{key:"onKeyDown",value:function(t){this.pointer===t&&t.camera&&(this.setVector(this.gameObject.x+t.camera.scrollX,this.gameObject.y+t.camera.scrollY,t.worldX,t.worldY),this.emit("update"))}},{key:"onKeyUp",value:function(t){this.pointer===t&&(this.pointer=void 0,this.clearVector(),this.emit("update"))}}]),a}();Object.assign(P.prototype,w);var C=Phaser.Utils.Objects.GetValue,_=function(){function e(i,s){t(this,e),void 0===s&&(s={});var n=C(s,"eventEmitter",void 0),a=C(s,"EventEmitterClass",void 0);this.setEventEmitter(n,a),s.eventEmitter=this.getEventEmitter(),this.scene=i,this.base=void 0,this.thumb=void 0,this.touchCursor=void 0,this.setRadius(C(s,"radius",100)),this.addBase(C(s,"base",void 0),s),this.addThumb(C(s,"thumb",void 0));var r=C(s,"x",0),o=C(s,"y",0);this.base.setPosition(r,o),this.thumb.setPosition(r,o),C(s,"fixed",!0)&&this.setScrollFactor(0),this.boot()}return i(e,[{key:"destroy",value:function(){this.destroyEventEmitter(),this.base.destroy(),this.thumb.destroy(),this.base=void 0,this.thumb=void 0,this.touchCursor=void 0}},{key:"createCursorKeys",value:function(){return this.touchCursor.createCursorKeys()}},{key:"forceX",get:function(){return this.touchCursor.forceX}},{key:"forceY",get:function(){return this.touchCursor.forceY}},{key:"force",get:function(){return this.touchCursor.force}},{key:"rotation",get:function(){return this.touchCursor.rotation}},{key:"angle",get:function(){return this.touchCursor.angle}},{key:"up",get:function(){return this.touchCursor.upKeyDown}},{key:"down",get:function(){return this.touchCursor.downKeyDown}},{key:"left",get:function(){return this.touchCursor.leftKeyDown}},{key:"right",get:function(){return this.touchCursor.rightKeyDown}},{key:"noKey",get:function(){return this.touchCursor.noKeyDown}},{key:"pointerX",get:function(){return this.touchCursor.end.x}},{key:"pointerY",get:function(){return this.touchCursor.end.y}},{key:"pointer",get:function(){return this.touchCursor.pointer}},{key:"setPosition",value:function(t,e){return this.x=t,this.y=e,this}},{key:"x",get:function(){return this.base.x},set:function(t){this.base.x=t,this.thumb.x=t}},{key:"y",get:function(){return this.base.y},set:function(t){this.base.y=t,this.thumb.y=t}},{key:"setVisible",value:function(t){return this.visible=t,this}},{key:"toggleVisible",value:function(){return this.visible=!this.visible,this}},{key:"visible",get:function(){return this.base.visible},set:function(t){this.base.visible=t,this.thumb.visible=t}},{key:"enable",get:function(){return this.touchCursor.enable},set:function(t){this.touchCursor.setEnable(t)}},{key:"setEnable",value:function(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"toggleEnable",value:function(){return this.setEnable(!this.enable),this}},{key:"setRadius",value:function(t){return this.radius=t,this}},{key:"addBase",value:function(t,e){return this.base&&this.base.destroy(),void 0===t&&(t=this.scene.add.circle(0,0,this.radius).setStrokeStyle(3,255)),this.touchCursor=new P(t,e),this.base=t,this}},{key:"addThumb",value:function(t){return this.thumb&&this.thumb.destroy(),void 0===t&&(t=this.scene.add.circle(0,0,40).setStrokeStyle(3,65280)),this.thumb=t,this}},{key:"setScrollFactor",value:function(t){return this.base.setScrollFactor(t),this.thumb.setScrollFactor(t),this}},{key:"boot",value:function(){this.touchCursor.on("update",this.update,this)}},{key:"update",value:function(){var t=this.touchCursor,e=this.base.x,i=this.base.y;if(t.anyKeyDown)if(t.force>this.radius){var s=t.rotation;e+=Math.cos(s)*this.radius,i+=Math.sin(s)*this.radius}else e+=t.forceX,i+=t.forceY;return this.thumb.x=e,this.thumb.y=i,this}}]),e}();return Object.assign(_.prototype,w),function(){s(n,Phaser.Plugins.BasePlugin);var e=o(n);function n(i){return t(this,n),e.call(this,i)}return i(n,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(t,e){return new _(t,e)}}]),n}()}()},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},i={};function s(t){var n=i[t];if(void 0!==n)return n.exports;var a=i[t]={exports:{}};return e[t].call(a.exports,a,a.exports,s),a.exports}s.m=e,t=[],s.O=(e,i,n,a)=>{if(!i){var r=1/0;for(u=0;u<t.length;u++){for(var[i,n,a]=t[u],o=!0,h=0;h<i.length;h++)(!1&a||r>=a)&&Object.keys(s.O).every((t=>s.O[t](i[h])))?i.splice(h--,1):(o=!1,a<r&&(r=a));if(o){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[i,n,a]},s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};s.O.j=e=>0===t[e];var e=(e,i)=>{var n,a,[r,o,h]=i,c=0;if(r.some((e=>0!==t[e]))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(h)var u=h(s)}for(e&&e(i);c<r.length;c++)a=r[c],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(u)},i=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),s.O(void 0,[216],(()=>s(67)));var n=s.O(void 0,[216],(()=>s(204)));n=s.O(n)})();